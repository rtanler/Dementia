<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Early-Stage Dementia Characteristics</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            overflow: hidden;
        }

        #container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }

        #svg-container {
            width: 100%;
            height: 400px;
            position: relative;
            margin-bottom: 20px;
        }

        svg {
            width: 100%;
            height: 100%;
        }

        .section-path {
            cursor: pointer;
            transition: opacity 0.3s, transform 0.2s;
        }

        .section-path:hover {
            opacity: 0.9;
            filter: brightness(1.1);
        }

        .section-path.active {
            stroke: #333;
            stroke-width: 3;
        }

        .section-label {
            font-size: 14px;
            font-weight: 600;
            fill: #333;
            pointer-events: none;
            text-anchor: middle;
        }

        .center-circle {
            fill: #ffffff;
            stroke: #666;
            stroke-width: 2;
        }

        .center-text {
            font-size: 16px;
            font-weight: 700;
            fill: #333;
            text-anchor: middle;
            pointer-events: none;
        }

        .center-subtext {
            font-size: 12px;
            fill: #666;
            text-anchor: middle;
            pointer-events: none;
        }

        #controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        button:hover {
            background: #0056b3;
        }

        button:active {
            transform: scale(0.98);
        }

        #detail-panel {
            display: none;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        #detail-panel.show {
            display: block;
        }

        .detail-header {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .detail-section {
            margin-bottom: 15px;
        }

        .detail-section h3 {
            font-size: 16px;
            margin-bottom: 8px;
            color: #495057;
        }

        .detail-section ul {
            list-style: none;
            padding-left: 0;
        }

        .detail-section li {
            padding: 5px 0 5px 20px;
            position: relative;
        }

        .detail-section li:before {
            content: "•";
            position: absolute;
            left: 5px;
        }

        .impaired-list li:before {
            color: #dc3545;
        }

        .preserved-list li:before {
            color: #28a745;
        }

        .example-box {
            background: white;
            border-left: 4px solid #007bff;
            padding: 12px;
            margin-top: 10px;
            border-radius: 4px;
            font-style: italic;
        }

        .meter-container {
            margin: 15px 0;
        }

        .meter-label {
            font-size: 14px;
            margin-bottom: 5px;
            color: #495057;
        }

        .meter-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(to right, #28a745, #ffc107, #dc3545);
            border-radius: 10px;
            transition: width 0.5s;
        }

        #bottom-message {
            background: #d1ecf1;
            border: 2px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        #bottom-message h3 {
            font-size: 16px;
            color: #0c5460;
            margin-bottom: 5px;
        }

        #bottom-message p {
            font-size: 14px;
            color: #0c5460;
        }

        #compare-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 3px solid #007bff;
            border-radius: 10px;
            padding: 30px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        #compare-modal.show {
            display: block;
        }

        #modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        #modal-overlay.show {
            display: block;
        }

        .stage-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stage-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border: 2px solid #dee2e6;
        }

        .stage-card h3 {
            margin-bottom: 10px;
            color: #495057;
        }

        .stage-card .impairment-level {
            font-weight: 600;
            margin-top: 10px;
        }

        .close-modal {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .close-modal:hover {
            color: #000;
        }

        @media (max-width: 600px) {
            #container {
                padding: 10px;
            }

            .section-label {
                font-size: 11px;
            }

            .center-text {
                font-size: 12px;
            }

            .center-subtext {
                font-size: 10px;
            }

            button {
                padding: 8px 15px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="controls">
            <button id="toggle-examples-btn">Show Examples</button>
            <button id="compare-stages-btn">Compare Stages</button>
            <button id="reset-btn">Reset View</button>
        </div>

        <div id="svg-container">
            <svg id="wheel-svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
                <!-- Sections will be drawn here by JavaScript -->
            </svg>
        </div>

        <div id="detail-panel"></div>

        <div id="bottom-message">
            <h3>Key Message</h3>
            <p>In early-stage dementia, much remains intact. Focus on what the person CAN do, not just what they can't.</p>
        </div>
    </div>

    <div id="modal-overlay"></div>
    <div id="compare-modal">
        <span class="close-modal" id="close-compare">&times;</span>
        <h2>Comparing Dementia Stages</h2>
        <div class="stage-comparison"></div>
    </div>

    <script>
        // Data structure for the five domains
        const domains = [
            {
                id: 'cognitive',
                name: 'Cognitive Abilities',
                color: '#ff8c42',
                colorLight: '#ffb380',
                impaired: [
                    'Recent memory',
                    'Learning new information',
                    'Complex planning'
                ],
                preserved: [
                    'Remote memory',
                    'Basic reasoning',
                    'Familiar knowledge'
                ],
                example: 'Can remember childhood home address but forgets conversation from this morning',
                impairmentDegree: 35
            },
            {
                id: 'function',
                name: 'Daily Function',
                color: '#4a90e2',
                colorLight: '#7fb3f0',
                impaired: [
                    'Managing finances',
                    'Complex cooking',
                    'Medication management without reminders'
                ],
                preserved: [
                    'Self-care (bathing, dressing)',
                    'Eating',
                    'Basic household tasks'
                ],
                example: 'Can shower independently but needs help balancing checkbook',
                impairmentDegree: 30
            },
            {
                id: 'personality',
                name: 'Personality',
                color: '#9b59b6',
                colorLight: '#bb8fcc',
                impaired: [
                    'May be more anxious',
                    'Less spontaneous',
                    'More rigid about routines'
                ],
                preserved: [
                    'Core personality recognizable',
                    'Values generally intact'
                ],
                example: 'Still friendly but less interested in trying new restaurants',
                impairmentDegree: 25
            },
            {
                id: 'behavior',
                name: 'Behavior',
                color: '#50c878',
                colorLight: '#88daa0',
                impaired: [
                    'More repetition',
                    'Some social withdrawal',
                    'Difficulty with new situations'
                ],
                preserved: [
                    'Generally cooperative',
                    'Able to engage socially',
                    'Follows most social norms'
                ],
                example: 'Asks "What time is dinner?" multiple times but follows through appropriately',
                impairmentDegree: 28
            },
            {
                id: 'mood',
                name: 'Mood',
                color: '#f4d03f',
                colorLight: '#f9e17f',
                impaired: [
                    'May have depression',
                    'Anxiety about decline',
                    'Frustration'
                ],
                preserved: [
                    'Can experience full range of emotions',
                    'Joy in positive experiences'
                ],
                example: 'Aware of memory problems and feels sad about losing abilities',
                impairmentDegree: 32
            }
        ];

        let selectedDomain = null;
        let showExamples = false;

        const svg = document.getElementById('wheel-svg');
        const detailPanel = document.getElementById('detail-panel');
        const toggleExamplesBtn = document.getElementById('toggle-examples-btn');
        const compareSagesBtn = document.getElementById('compare-stages-btn');
        const resetBtn = document.getElementById('reset-btn');
        const compareModal = document.getElementById('compare-modal');
        const modalOverlay = document.getElementById('modal-overlay');
        const closeCompare = document.getElementById('close-compare');

        // Draw the wheel
        function drawWheel() {
            const centerX = 400;
            const centerY = 200;
            const innerRadius = 60;
            const outerRadius = 180;
            const angleStep = (2 * Math.PI) / domains.length;
            const startAngle = -Math.PI / 2; // Start at top

            // Create SVG definitions for gradients
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            svg.appendChild(defs);

            domains.forEach((domain, index) => {
                // Create gradient for this section
                const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'radialGradient');
                gradient.setAttribute('id', `gradient-${domain.id}`);

                const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                stop1.setAttribute('offset', '0%');
                stop1.setAttribute('stop-color', domain.colorLight);

                const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                stop2.setAttribute('offset', '100%');
                stop2.setAttribute('stop-color', domain.color);

                gradient.appendChild(stop1);
                gradient.appendChild(stop2);
                defs.appendChild(gradient);
            });

            // Draw sections
            domains.forEach((domain, index) => {
                const angle1 = startAngle + index * angleStep;
                const angle2 = startAngle + (index + 1) * angleStep;

                // Calculate path points
                const x1Inner = centerX + innerRadius * Math.cos(angle1);
                const y1Inner = centerY + innerRadius * Math.sin(angle1);
                const x1Outer = centerX + outerRadius * Math.cos(angle1);
                const y1Outer = centerY + outerRadius * Math.sin(angle1);

                const x2Inner = centerX + innerRadius * Math.cos(angle2);
                const y2Inner = centerY + innerRadius * Math.sin(angle2);
                const x2Outer = centerX + outerRadius * Math.cos(angle2);
                const y2Outer = centerY + outerRadius * Math.sin(angle2);

                // Create path for section
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const pathData = `
                    M ${x1Inner} ${y1Inner}
                    L ${x1Outer} ${y1Outer}
                    A ${outerRadius} ${outerRadius} 0 0 1 ${x2Outer} ${y2Outer}
                    L ${x2Inner} ${y2Inner}
                    A ${innerRadius} ${innerRadius} 0 0 0 ${x1Inner} ${y1Inner}
                    Z
                `;

                path.setAttribute('d', pathData);
                path.setAttribute('fill', `url(#gradient-${domain.id})`);
                path.setAttribute('class', 'section-path');
                path.setAttribute('data-domain', domain.id);
                path.addEventListener('click', () => selectDomain(domain.id));

                svg.appendChild(path);

                // Add label
                const labelAngle = startAngle + (index + 0.5) * angleStep;
                const labelRadius = (innerRadius + outerRadius) / 2;
                const labelX = centerX + labelRadius * Math.cos(labelAngle);
                const labelY = centerY + labelRadius * Math.sin(labelAngle);

                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', labelX);
                text.setAttribute('y', labelY);
                text.setAttribute('class', 'section-label');
                text.textContent = domain.name;

                svg.appendChild(text);
            });

            // Draw center circle
            const centerCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            centerCircle.setAttribute('cx', centerX);
            centerCircle.setAttribute('cy', centerY);
            centerCircle.setAttribute('r', innerRadius);
            centerCircle.setAttribute('class', 'center-circle');
            svg.appendChild(centerCircle);

            // Center text
            const centerText1 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            centerText1.setAttribute('x', centerX);
            centerText1.setAttribute('y', centerY - 10);
            centerText1.setAttribute('class', 'center-text');
            centerText1.textContent = 'Early-Stage';
            svg.appendChild(centerText1);

            const centerText2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            centerText2.setAttribute('x', centerX);
            centerText2.setAttribute('y', centerY + 10);
            centerText2.setAttribute('class', 'center-text');
            centerText2.textContent = 'Dementia';
            svg.appendChild(centerText2);

            const centerSubtext = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            centerSubtext.setAttribute('x', centerX);
            centerSubtext.setAttribute('y', centerY + 30);
            centerSubtext.setAttribute('class', 'center-subtext');
            centerSubtext.textContent = 'Independence';
            svg.appendChild(centerSubtext);

            const centerSubtext2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            centerSubtext2.setAttribute('x', centerX);
            centerSubtext2.setAttribute('y', centerY + 45);
            centerSubtext2.setAttribute('class', 'center-subtext');
            centerSubtext2.textContent = 'with Support';
            svg.appendChild(centerSubtext2);
        }

        function selectDomain(domainId) {
            selectedDomain = domains.find(d => d.id === domainId);

            // Update active state
            document.querySelectorAll('.section-path').forEach(path => {
                path.classList.remove('active');
                if (path.getAttribute('data-domain') === domainId) {
                    path.classList.add('active');
                }
            });

            displayDetails();
        }

        function displayDetails() {
            if (!selectedDomain) {
                detailPanel.classList.remove('show');
                return;
            }

            let html = `
                <div class="detail-header">
                    <span class="color-indicator" style="background: ${selectedDomain.color}"></span>
                    ${selectedDomain.name}
                </div>

                <div class="meter-container">
                    <div class="meter-label">Degree of Impairment: ${selectedDomain.impairmentDegree}% (Mild)</div>
                    <div class="meter-bar">
                        <div class="meter-fill" style="width: ${selectedDomain.impairmentDegree}%"></div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>⚠️ Impaired</h3>
                    <ul class="impaired-list">
                        ${selectedDomain.impaired.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                </div>

                <div class="detail-section">
                    <h3>✓ Preserved</h3>
                    <ul class="preserved-list">
                        ${selectedDomain.preserved.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                </div>
            `;

            if (showExamples) {
                html += `
                    <div class="example-box">
                        <strong>Example:</strong> ${selectedDomain.example}
                    </div>
                `;
            }

            detailPanel.innerHTML = html;
            detailPanel.classList.add('show');
        }

        function toggleExamples() {
            showExamples = !showExamples;
            toggleExamplesBtn.textContent = showExamples ? 'Hide Examples' : 'Show Examples';
            if (selectedDomain) {
                displayDetails();
            }
        }

        function showCompareStages() {
            const stageData = [
                {
                    name: 'Early Stage',
                    description: 'Independence with Support',
                    cognitive: 'Mild memory loss, difficulty with complex tasks',
                    function: 'Mostly independent, needs help with finances/medications',
                    personality: 'Core personality intact, some anxiety',
                    behavior: 'Some repetition, generally appropriate',
                    mood: 'Aware of decline, may be anxious or sad',
                    impairment: '25-35%'
                },
                {
                    name: 'Moderate Stage',
                    description: 'Requires Assistance',
                    cognitive: 'Significant memory loss, confusion about time/place',
                    function: 'Needs help with most ADLs, safety concerns',
                    personality: 'Personality changes more pronounced',
                    behavior: 'May wander, increased repetition, agitation',
                    mood: 'Less aware of deficits, emotional lability',
                    impairment: '50-70%'
                },
                {
                    name: 'Late Stage',
                    description: 'Full-Time Care Required',
                    cognitive: 'Severe cognitive impairment, minimal communication',
                    function: 'Completely dependent for all ADLs',
                    personality: 'Original personality difficult to recognize',
                    behavior: 'Limited purposeful behavior, may be bedbound',
                    mood: 'Limited emotional expression',
                    impairment: '85-100%'
                }
            ];

            const comparisonHTML = stageData.map(stage => `
                <div class="stage-card">
                    <h3>${stage.name}</h3>
                    <p style="font-style: italic; margin-bottom: 10px;">${stage.description}</p>
                    <p><strong>Cognitive:</strong> ${stage.cognitive}</p>
                    <p><strong>Function:</strong> ${stage.function}</p>
                    <p><strong>Personality:</strong> ${stage.personality}</p>
                    <p><strong>Behavior:</strong> ${stage.behavior}</p>
                    <p><strong>Mood:</strong> ${stage.mood}</p>
                    <p class="impairment-level">Impairment: ${stage.impairment}</p>
                </div>
            `).join('');

            document.querySelector('.stage-comparison').innerHTML = comparisonHTML;
            compareModal.classList.add('show');
            modalOverlay.classList.add('show');
        }

        function closeModal() {
            compareModal.classList.remove('show');
            modalOverlay.classList.remove('show');
        }

        function reset() {
            selectedDomain = null;
            document.querySelectorAll('.section-path').forEach(path => {
                path.classList.remove('active');
            });
            detailPanel.classList.remove('show');
        }

        // Event listeners
        toggleExamplesBtn.addEventListener('click', toggleExamples);
        compareSagesBtn.addEventListener('click', showCompareStages);
        resetBtn.addEventListener('click', reset);
        closeCompare.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);

        // Initialize
        drawWheel();
    </script>
</body>
</html>
